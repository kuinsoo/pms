<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.ddit.evaluation.mapper.EvaluationMapper">
	<select id="evaluationView" parameterType="Map" resultType="evalVo">
		select project_id, project_title, project_overview, project_sdate, project_eedate , project_edate
       ,PM.pmember_id , work.work_title , work_content
from MEMBER M INNER join PROJECT_MEMBER PM on (M.MEMBER_MAIL = PM.PMEMBER_MEMBER)
    INNER JOIN PROJECT P on (PM.PMEMBER_PROJECT = P.PROJECT_ID)
left outer join (select WORK_TITLE, WORK_CONTENT, PM2.PMEMBER_ID
           from WORK W, WORK_MEMBER WM, PROJECT_MEMBER PM2
           where W.WORK_ID= WM.WORK_ID
             and WM.PMEMBER_ID = PM2.PMEMBER_ID
            ) work on PM.PMEMBER_ID= work.PMEMBER_ID
where PM.PMEMBER_MEMBER = #{member_mail}
and P.PROJECT_ID like '%'
order by to_number(PM.PMEMBER_ID)
	</select>
</mapper>
